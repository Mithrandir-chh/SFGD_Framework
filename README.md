
# SFGD framework

<img src="https://www.sheffield.ac.uk/polopoly_fs/1.698472!/image/t2k_logo_small.png" width="200">
<img src="http://cds.cern.ch/record/2653852/files/nd_upgrade.png" width="200">

## Overview
This framework is a multipurpose tool designed to handle both raw prototype data and MC output, manipulate them, and use it for analysis.

The package is splited in 2 main folders: */analysis/* and */data_processing/*.
- **/analysis/**         :     Contains code to read prototype data or MC. Provides tools to develop analysis, including reconstruction [under-development].
- **/data_processing/**  :     Contains the necessary code to convert raw data from babyMIND electronics into calibrated data, stored in well-organized classes as ROOT output. 

## General information:

This software inside /analysis/ is organised in the following way:

- **/src/**       :  Contains the functions and classes used by all the analysis.
- **/macros/**    :  Contains the analysis macros, coded using the tools in /src/ inside dedicated user folders.
- **/build/**     :  Contains all the files generated during the build process.
- **/bin/**       :  Contains the executable files generated by the analysis in macros inside a dedicated user folders.

## How to get started

To run one example:
```
$ cd build
$ cmake ../ -Dtemplate=1
$ cd ../bin/template
$ ./templateAna
```

1. Go to /analysis/macros/
2. Copy  /analysis/macros/template into /analysis/macros/newProj/
    - newProj examples: _muonDecay_, _pionReco_
3. Go to /analysis/macros/newProj/
4. Rename templateAna.C to newMacroName.cc
5. Edit newMacroName.cc
    - Modify line `#define THIS_NAME templateAna` to `#define THIS_NAME newMacroName`
    - Rename the main function `void templateAna()` to `void newMacroName()`
5. Edit the CMakeLists.txt updating the names to match your new macro
    - `ADD_EXECUTABLE(newMacroExeName          newMacroName.cc)`
    - `TARGET_LINK_LIBRARIES(newMacroExeName   SuperFGD_Analysis ${ROOT_LIBRARIES})`
6. Go to /analysis/
7. Edit the CMakeLists.txt to add your new project. You can do this using the following lines:
    - `ADD_PROJECT(newProj)`
8. Build your project for the first time.
    - Go to /analysis/build
    - Include your project to the Makefile by using `cmake ../ -DnewProj`
    - Compile it, using `make`.
9. Go to bin and check that there is a folder named _newProj_
    - Check that there is an executable file inside called _newMacroExeName_
10. Run your analysis. `./newMacroExeName`

- After completing all this steps, you are ready to edit _newMacroName.cc_ to generate a new analysis!


## TStyle options
Specially useful in case of needing style unification for publication.
- t2kStyle can be found in /src/tools/global_tools.cc

To use it, add the following lines to your macro:

```
TString localStyleName = "T2K";
// -- WhichStyle --
// 1 = presentation large fonts
// 2 = presentation small fonts
// 3 = publication/paper
Int_t localWhichStyle = 3;
TStyle* t2kstyle = SetT2KStyle(localWhichStyle, localStyleName);
```

